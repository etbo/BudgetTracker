<div class="filter-wrapper">
  <mat-chip-listbox>
    @if (showLastImportOption) {
    <mat-chip-option [selected]="currentView === 'last'"
      (selectionChange)="$event.source.selected = true; onViewChange('last')">
      Dernier import
    </mat-chip-option>
    }
    <mat-chip-option [selected]="currentView === 'last3'"
      (selectionChange)="$event.source.selected = true; onViewChange('last3')">
      3 mois
    </mat-chip-option>
    <mat-chip-option [selected]="currentView === 'last6'"
      (selectionChange)="$event.source.selected = true; onViewChange('last6')">
      6 mois
    </mat-chip-option>
    <mat-chip-option [selected]="currentView === 'last12'"
      (selectionChange)="$event.source.selected = true; onViewChange('last12')">
      12 mois
    </mat-chip-option>
    <mat-chip-option [selected]="currentView === 'all'"
      (selectionChange)="$event.source.selected = true; onViewChange('all')">
      Toutes
    </mat-chip-option>
    <mat-chip-option [selected]="currentView === 'custom'"
      (selectionChange)="$event.source.selected = true; onViewChange('custom')">
      Personnalisé
    </mat-chip-option>
  </mat-chip-listbox>

  @if (currentView === 'custom') {
  <div class="custom-dates">
    <mat-form-field appearance="outline">
      <mat-label>Début</mat-label>
      <input matInput [matDatepicker]="pickerStart" [(ngModel)]="startDate" (dateChange)="emitCustom()">
      <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
      <mat-datepicker #pickerStart></mat-datepicker>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Fin</mat-label>
      <input matInput [matDatepicker]="pickerEnd" [(ngModel)]="endDate" (dateChange)="emitCustom()">
      <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
      <mat-datepicker #pickerEnd></mat-datepicker>
    </mat-form-field>
  </div>
  }
</div>