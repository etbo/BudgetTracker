<mat-card class="section">
  <mat-card-header>
    <mat-card-title>Liste des opérations</mat-card-title>
  </mat-card-header>

  <mat-card-content style="padding-top: 20px;">

    <div class="grid-wrapper">
      <mat-form-field appearance="outline">
        <mat-label>Filtre</mat-label>
        <mat-select [(ngModel)]="filterType" (selectionChange)="refresh()">
          <mat-option value="AllOps">Toutes les opérations</mat-option>
          <mat-option value="A">Type manquant</mat-option>
          <mat-option value="B">Chèques</mat-option>
          <mat-option value="C">Dernier import</mat-option>
          <mat-option value="D">Erreur catégorie</mat-option>
        </mat-select>
      </mat-form-field>

      <app-date-filter></app-date-filter>

      <mat-form-field appearance="outline" class="flex-grow">
        <mat-label>Rechercher</mat-label>
        <input matInput [(ngModel)]="searchString" (input)="onQuickFilterChanged()">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>

      <div *ngIf="isLoading()" class="flex flex-col items-center p-10">
        <mat-spinner diameter="40"></mat-spinner>
        <p class="mt-4">Chargement...</p>
      </div>

      <ag-grid-angular style="width: 100%;" class="ag-theme-alpine" [rowData]="resultatOperations()"
        [defaultColDef]="defaultColDef" [columnDefs]="columnDefs" [domLayout]="'autoHeight'" [context]="gridContext"
        [getRowId]="getRowId" [pagination]="true" [paginationPageSize]="100"
        [paginationPageSizeSelector]="[20, 50, 100]" (gridReady)="onGridReady($event)"
        (cellValueChanged)="onCellValueChanged($event)">
      </ag-grid-angular>
    </div>
  </mat-card-content>
</mat-card>